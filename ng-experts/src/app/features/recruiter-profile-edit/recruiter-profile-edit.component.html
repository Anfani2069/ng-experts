<app-dashboard-layout [showSearch]="false" [pageTitle]="'Mon profil'" [pageSubtitle]="'Gérez les informations de votre compte recruteur'">
  <div class="px-6 md:px-8 py-6 bg-heroBg">
    <!-- Header profil -->
    <div class="bg-[#1a1a1a] border border-white/5 rounded-2xl p-6 mb-6 flex items-center gap-6">
      <div class="relative">
        <img [src]="userAvatar()" alt="avatar" class="w-20 h-20 rounded-full object-cover border-2 border-primary/30">
        <div class="absolute -bottom-1 -right-1 w-6 h-6 bg-primary rounded-full flex items-center justify-center border-2 border-[#1a1a1a]">
          <i class="fa-solid fa-briefcase text-white text-[8px]"></i>
        </div>
      </div>
      <div>
        <h2 class="text-xl font-bold text-white">{{ recruiterProfile()?.firstName }} {{ recruiterProfile()?.lastName }}</h2>
        <p class="text-subtext text-sm">{{ recruiterProfile()?.company || 'Recruteur' }}</p>
        <span class="mt-1 inline-flex items-center gap-1.5 px-2 py-0.5 bg-primary/10 border border-primary/20 text-primary text-[10px] font-bold uppercase tracking-widest rounded-full">
          <i class="fa-solid fa-briefcase text-[8px]"></i> Recruteur
        </span>
      </div>
    </div>
    @if (success()) {
      <div class="mb-4 p-4 bg-green-500/10 border border-green-500/20 rounded-xl flex items-center gap-2 text-green-400 text-sm">
        <i class="fa-solid fa-check-circle"></i> {{ success() }}
      </div>
    }
    @if (error()) {
      <div class="mb-4 p-4 bg-red-500/10 border border-red-500/20 rounded-xl flex items-center gap-2 text-red-400 text-sm">
        <i class="fa-solid fa-exclamation-circle"></i> {{ error() }}
      </div>
    }
    <form [formGroup]="profileForm" (ngSubmit)="onSave()">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- INFORMATIONS PERSONNELLES -->
        <div class="bg-[#1a1a1a] border border-white/5 rounded-2xl p-6">
          <h3 class="font-bold text-white mb-5 flex items-center gap-2">
            <i class="fa-solid fa-user text-primary text-sm"></i>
            Informations personnelles
          </h3>
          <div class="space-y-4">
            <div class="grid grid-cols-2 gap-4">
              <div>
                <label class="block text-xs font-bold uppercase tracking-widest text-subtext mb-2">Prenom *</label>
                <input formControlName="firstName" type="text" placeholder="Jean"
                  class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-sm text-white placeholder:text-subtext focus:outline-none focus:border-primary/50 transition"
                  [class.border-red-500]="getFieldError('firstName')">
                @if (getFieldError('firstName')) {
                  <p class="text-red-400 text-xs mt-1">{{ getFieldError('firstName') }}</p>
                }
              </div>
              <div>
                <label class="block text-xs font-bold uppercase tracking-widest text-subtext mb-2">Nom *</label>
                <input formControlName="lastName" type="text" placeholder="Dupont"
                  class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-sm text-white placeholder:text-subtext focus:outline-none focus:border-primary/50 transition"
                  [class.border-red-500]="getFieldError('lastName')">
                @if (getFieldError('lastName')) {
                  <p class="text-red-400 text-xs mt-1">{{ getFieldError('lastName') }}</p>
                }
              </div>
            </div>
            <div>
              <label class="block text-xs font-bold uppercase tracking-widest text-subtext mb-2">Email</label>
              <input formControlName="email" type="email" readonly
                class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-sm text-white/50 cursor-not-allowed">
              <p class="text-white/20 text-[11px] mt-1">L email ne peut pas etre modifie</p>
            </div>
            <div>
              <label class="block text-xs font-bold uppercase tracking-widest text-subtext mb-2">Telephone</label>
              <input formControlName="phone" type="tel" placeholder="+33 6 12 34 56 78"
                class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-sm text-white placeholder:text-subtext focus:outline-none focus:border-primary/50 transition">
            </div>
            <div>
              <label class="block text-xs font-bold uppercase tracking-widest text-subtext mb-2">Pays</label>
              <select formControlName="location"
                class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-sm text-white focus:outline-none focus:border-primary/50 transition">
                @for (country of countries(); track country) {
                  <option [value]="country">{{ country }}</option>
                }
              </select>
            </div>
          </div>
        </div>
        <!-- INFORMATIONS ENTREPRISE -->
        <div class="bg-[#1a1a1a] border border-white/5 rounded-2xl p-6">
          <h3 class="font-bold text-white mb-5 flex items-center gap-2">
            <i class="fa-solid fa-building text-primary text-sm"></i>
            Informations entreprise
          </h3>
          <div class="space-y-4">
            <div>
              <label class="block text-xs font-bold uppercase tracking-widest text-subtext mb-2">Nom de l entreprise *</label>
              <input formControlName="company" type="text" placeholder="Ma Societe"
                class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-sm text-white placeholder:text-subtext focus:outline-none focus:border-primary/50 transition"
                [class.border-red-500]="getFieldError('company')">
              @if (getFieldError('company')) {
                <p class="text-red-400 text-xs mt-1">{{ getFieldError('company') }}</p>
              }
            </div>
            <div>
              <label class="block text-xs font-bold uppercase tracking-widest text-subtext mb-2">Taille de l entreprise</label>
              <select formControlName="companySize"
                class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-sm text-white focus:outline-none focus:border-primary/50 transition">
                <option value="">Selectionner...</option>
                @for (size of companySizes(); track size) {
                  <option [value]="size" [selected]="recruiterProfile()?.companySize === size">{{ size }}</option>
                }
              </select>
            </div>
            <div>
              <label class="block text-xs font-bold uppercase tracking-widest text-subtext mb-2">Secteur d activite</label>
              <select formControlName="industry"
                class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-sm text-white focus:outline-none focus:border-primary/50 transition">
                <option value="">Selectionner...</option>
                @for (industry of industries(); track industry) {
                  <option [value]="industry" [selected]="recruiterProfile()?.industry === industry">{{ industry }}</option>
                }
              </select>
            </div>
            <div>
              <label class="block text-xs font-bold uppercase tracking-widest text-subtext mb-2">Site web</label>
              <input formControlName="website" type="url" placeholder="https://mon-entreprise.fr"
                class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-sm text-white placeholder:text-subtext focus:outline-none focus:border-primary/50 transition">
            </div>
          </div>
        </div>
      </div>
      <!-- Actions -->
      <div class="mt-6 flex items-center justify-end gap-3">
        <a routerLink="/recruiter/dashboard"
          class="px-6 py-3 border border-white/10 text-subtext rounded-full text-[11px] font-bold uppercase tracking-widest hover:bg-white/5 transition">
          Annuler
        </a>
        <button type="submit" [disabled]="profileForm.invalid || isSaving()"
          class="px-8 py-3 bg-primary text-white rounded-full text-[11px] font-bold uppercase tracking-widest hover:bg-primary/80 transition shadow-[0_0_20px_-5px_rgba(236,72,153,0.5)] disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2">
          @if (isSaving()) {
            <i class="fa-solid fa-circle-notch fa-spin text-xs"></i>
            Sauvegarde...
          } @else {
            <i class="fa-solid fa-save text-xs"></i>
            Sauvegarder
          }
        </button>
      </div>
    </form>
  </div>
</app-dashboard-layout>
